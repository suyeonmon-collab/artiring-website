# HTML 업로드 문제 해결 가이드

## 문제: HTML 파일 업로드 후 포스트가 자동으로 생성되지 않음

### 1. 브라우저 콘솔 확인 (F12)

HTML 파일을 업로드할 때 브라우저 개발자 도구(F12)의 콘솔 탭을 열어두세요.

**확인할 로그:**
- `📤 HTML 파일 업로드 시작` - 업로드 시작 확인
- `🔐 인증 헤더` - 인증 정보 확인
- `📥 응답 상태` - 서버 응답 상태 확인
- `✅ Upload success` 또는 `❌ Upload failed` - 성공/실패 확인

### 2. 네트워크 탭 확인

브라우저 개발자 도구의 **네트워크** 탭에서:
1. `/api/upload-html` 요청 찾기
2. 요청 상태 확인 (200 = 성공, 401 = 인증 실패, 500 = 서버 오류)
3. 응답 내용 확인

### 3. 일반적인 문제와 해결 방법

#### 문제 1: 인증 실패 (401 Unauthorized)
**증상:** "인증이 만료되었습니다" 메시지

**해결:**
1. `/admin/login` 페이지에서 다시 로그인
2. 브라우저 콘솔에서 `localStorage.getItem('user')` 확인
3. 사용자 정보가 올바른지 확인

#### 문제 2: 파일 형식 오류 (400 Bad Request)
**증상:** "HTML 파일만 업로드 가능합니다" 메시지

**해결:**
- 파일 확장자가 `.html`인지 확인
- 파일이 실제로 HTML 형식인지 확인

#### 문제 3: 서버 오류 (500 Internal Server Error)
**증상:** "블로그 포스트 생성에 실패했습니다" 메시지

**해결:**
1. 브라우저 콘솔의 에러 메시지 확인
2. Vercel 로그 확인 (배포 후)
3. 데이터베이스 연결 확인

#### 문제 4: 포스트는 생성되었지만 /records에 표시되지 않음
**증상:** 포스트는 생성되었지만 기록 페이지에 안 보임

**해결:**
1. 포스트 상태가 `published`인지 확인
2. `published_at` 값이 설정되어 있는지 확인
3. `/admin/editor/[postId]`에서 포스트 상태 확인

### 4. 테스트 방법

#### 방법 1: 브라우저 콘솔에서 테스트
```javascript
// 관리자 로그인 후 브라우저 콘솔에서 실행
testHtmlUpload()
```

#### 방법 2: 수동 테스트
1. `/admin/editor/new` 페이지 접속
2. "HTML 파일 업로드" 버튼 클릭
3. HTML 파일 선택
4. 브라우저 콘솔 확인
5. 성공 메시지 확인

### 5. 로그 확인 위치

#### 클라이언트 로그 (브라우저 콘솔)
- 업로드 시작/완료
- 인증 헤더 정보
- 응답 데이터

#### 서버 로그 (Vercel)
- API 호출 확인
- 인증 확인
- 파일 저장
- 포스트 생성

### 6. 데이터베이스 확인

Supabase에서 직접 확인:
```sql
SELECT id, title, slug, status, html_file, created_at 
FROM blog_posts 
ORDER BY created_at DESC 
LIMIT 5;
```

### 7. 체크리스트

업로드 전 확인:
- [ ] 관리자로 로그인되어 있음
- [ ] HTML 파일이 올바른 형식임
- [ ] 파일 크기가 10MB 이하임
- [ ] 브라우저 콘솔이 열려있음

업로드 후 확인:
- [ ] 성공 메시지가 표시됨
- [ ] 포스트 ID가 생성됨
- [ ] `/records` 페이지에 포스트가 표시됨
- [ ] HTML 파일이 `/public/blog/` 폴더에 저장됨

### 8. 문의 시 제공할 정보

문제가 계속되면 다음 정보를 제공해주세요:
1. 브라우저 콘솔의 전체 로그 (스크린샷 또는 복사)
2. 네트워크 탭의 `/api/upload-html` 요청/응답 (스크린샷)
3. 업로드하려는 HTML 파일 (일부 또는 전체)
4. 발생한 에러 메시지 (정확한 텍스트)


